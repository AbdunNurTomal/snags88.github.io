<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Basic React Project Configuration</title> <meta name="description" content="I made it through the basic React-Rails tutorial and read through some documentation on the Facebook React page.Naturally, feeling pretty good about myself, ..."> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="http://snags88.github.io/basic-react-project-configuration"> <link rel="alternate" type="application/rss+xml" title="gem install Seiji" href="http://snags88.github.io/feed.xml"> <script src="/assets/js/modernizr.js"></script> </head> <body"> <main class="wrapper"> <header class="site-header"> <a href="#navbar" id="menu-burger" class="menu-burger">Menu <span class="nav-icon"></span> <svg x="0px" y="0px" width="54px" height="54px" viewBox="0 0 54 54"> <circle fill="transparent" stroke="#000000" stroke-width="1" cx="27" cy="27" r="25" stroke-dasharray="157 157" stroke-dashoffset="157"></circle> </svg> </a> <div id="navbar" class="navbar"> <div class="navigation-wrapper"> <div class="half-block"> <h2>Navigation</h2> <nav> <ul class="no-style primary-nav"> <li><a href="/">Home</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/about">About</a></li> <li><a href="http://github.com/snags88" target="_blank"><i class="icon icon-github"></i> Github</a></li> <li><a href="http://linkedin.com/in/snaganuma" target="_blank"><i class="icon icon-linkedin"></i> LinkedIn</a></li> <li><a href="http://twitter.com/S2k10" target="_blank"><i class="icon icon-twitter"></i> Twitter</a></li> </ul> </nav> </div> </div> </div> </header> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header intro"> <div class="intro-in"> <h1 class="post-title" itemprop="name headline">Basic React Project Configuration</h1> <p class="post-meta"><time datetime="2016-05-08T11:04:00-07:00" itemprop="datePublished">May 8, 2016</time></p> </div> </header> <div class="post-content container" itemprop="articleBody"> <p>I made it through the <a href="https://www.airpair.com/reactjs/posts/reactjs-a-guide-for-rails-developers">basic React-Rails tutorial</a> and read through some documentation on the <a href="https://facebook.github.io">Facebook React page</a>. Naturally, feeling pretty good about myself, I charged ahead to make a simple ToDo list using React.js. I mean super simple as in no data persistence, no styling, no fancy animations.</p> <p>A few hours later, I still haven’t written a single line of code related to React… Main reason is that the tutorial I ran through didn’t really talk about setting up a React project from scratch. There was a lot of nice abstractions built with the <code class="highlighter-rouge">react-rails</code> gem and all the behind-the-scenes Rails magic.</p> <p>After some researching I guess there are a few ways of accomplishing this. For this particular setup, we’ll be using</p> <ol> <li><code class="highlighter-rouge">npm</code> as our package manager</li> <li><code class="highlighter-rouge">browserify</code> to modularize our code to be used across different files</li> <li><code class="highlighter-rouge">gulp</code> as our build/task-runner.</li> </ol> <p>I did read that <a href="https://webpack.github.io/">Webpack</a> is what most people are using now a days, but I’ll tackle the configuration for Webpack in a different post.</p> <h2 id="setting-up-our-project-folder">Setting up our project folder</h2> <p>So let’s assume that we already have our project folder and it’s connected to a git repo. Structure your project folder so it looks like this:</p> <figure class="highlight"><pre><code class="language-text" data-lang="text">src/
  |-js/
    |-components/
    |-App.jsx
  |-index.html</code></pre></figure> <p>This source folder will hold our code. Important note here is that our <code class="highlighter-rouge">App</code> file is using the <code class="highlighter-rouge">.jsx</code> extension. This will make more sense when we actually start writing code related to React, but for now just know that it’s a Javascript precompiler that allows you to write HTML-like code into your js file… kinda like coffeescript.</p> <h2 id="node-package-manager">Node Package Manager</h2> <p>The first thing we’re going to setup is NPM. You can do this by running <code class="highlighter-rouge">npm init</code>. It will ask a bunch of questions about the project so that all of the information can be stored in the <code class="highlighter-rouge">package.json</code> file in the root of our project.</p> <p>The <code class="highlighter-rouge">package.json</code> file is like a blueprint that describes our project and its dependencies. This way, if we put this repo in another environment, you can just run <code class="highlighter-rouge">npm install</code> to get all of the dependencies. For more info about <code class="highlighter-rouge">package.json</code> check out the <a href="https://docs.npmjs.com/files/package.json">documentation here</a>.</p> <p>Another thing you might want to do here is to add a <code class="highlighter-rouge">.gitignore</code> file to the root of your project and add <code class="highlighter-rouge">node_modules/*</code> to the file. All the node packages we install will end up in that folder and we don’t want to commit those to git.</p> <h2 id="configuring-browserify">Configuring Browserify</h2> <p>Ok, now that we have a <code class="highlighter-rouge">package.json</code> file, let’s start installing some npm modules. The first one we’ll install is <code class="highlighter-rouge">browserify</code>. This bad boy will let us modularize our code in different files and require them into other files. You can read more about Browserify <a href="http://browserify.org/">here</a>.</p> <p>To install Browserify, run: <code class="highlighter-rouge">$ npm install browserify --save-dev</code> in your CLI.</p> <p>This will install browserify for our project AND save it as a <code class="highlighter-rouge">devDependency</code> in our <code class="highlighter-rouge">package.json</code> file. If you open up your <code class="highlighter-rouge">package.json</code> file you’ll see something like:</p> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"devDependencies"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"browserify"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^13.0.1"</span><span class="w">
</span><span class="p">}</span></code></pre></figure> <p>The next one we want is <code class="highlighter-rouge">babelify</code>. This is a transform used by browserify to “Babelify” our code. <a href="https://www.youtube.com/watch?v=Uk2bgp8OLT8">Here</a> is a good video on what a browserify transform does. And if you’re wondering what “Babel” is, it’s a javascript compiler that takes files like <code class="highlighter-rouge">*.jsx</code> and compiles it into proper javascript files. Another reason for using Babel is that you can actually write ES2015 syntax and it will compile down to ES5, which is supported by all modern web browsers. For more about Babel, check out their <a href="https://babeljs.io/">site</a></p> <p>Ok, to install Babelify, run: <code class="highlighter-rouge">$ npm install babelify --save-dev</code>.</p> <p>We also want to install some presets so that babel can properly compile our files. The two we need are for ES2015 and react.</p> <p>Run: <code class="highlighter-rouge">$ npm install babel-preset-es2015 babel-preset-react --save-dev</code>.</p> <p>Lastly, create a file called <code class="highlighter-rouge">.babelrc</code> in the root of your project and stick the following json in there to make sure these presets are used:</p> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="err">'presets':</span><span class="w"> </span><span class="err">['es2015',</span><span class="w"> </span><span class="err">'react']</span><span class="w">
</span><span class="p">}</span></code></pre></figure> <h2 id="requiring-reactjs">Requiring React.js</h2> <p>There are a few ways to require the React.js library. We’re just going to do a quick and dirty script tag pointing to a CDN. You can copy and paste this into your CLI and it will copy down some HTML I’ve already written that contains the script tag for the React library.</p> <figure class="highlight"><pre><code class="language-text" data-lang="text">$ curl https://gist.githubusercontent.com/snags88/200fe956ec10a829c4757f11ecef4c84/raw/85a98137b3023561625df06947ed624bdae0a972/react-basic-index.html &gt; src/index.html</code></pre></figure> <p>Other options you have for grabbing the React library include installing it as an NPM module.</p> <h2 id="using-babelify">Using Babelify</h2> <p>Alright, now we can put all this stuff to use. Create a file called <code class="highlighter-rouge">hello.jsx</code> inside the components folder and put some simple code in the file:</p> <figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// src/js/components/hello.jsx</span>

<span class="kd">var</span> <span class="nx">Hello</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
  <span class="na">render</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">render</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span> <span class="nx">Hello</span> <span class="nx">world</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Hello</span><span class="p">;</span></code></pre></figure> <p>That <code class="highlighter-rouge">module.exports</code> will export out the <code class="highlighter-rouge">Hello</code> variable. When the file is required in another, whatever was exported will be available. So in our <code class="highlighter-rouge">App.jsx</code> file we can render this React component</p> <figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// src/js/App.jsx</span>

<span class="kd">var</span> <span class="nx">HelloComponent</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./components/hello.jsx'</span><span class="p">);</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">HelloComponent</span> <span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'js--content'</span><span class="p">));</span></code></pre></figure> <p>Some of the syntax used in this file is definitely not legit javascript, but when the code is built, it will compile properly.</p> <h2 id="using-gulp-as-our-builder">Using Gulp as our builder</h2> <p>In order to use Gulp, we’ll have to install it as a dependency in our project. We’ll also use <code class="highlighter-rouge">gulp-browserify</code> to run browserify in our gulp task.</p> <p><code class="highlighter-rouge">$ npm install gulp gulp-browserify gulp-rename --save-dev</code></p> <p>We will define our Gulp tasks in a file called <code class="highlighter-rouge">gulpfile.js</code>. The way that tasks are defined is that we can read a file, then pipe it through to do what you will such as renaming it, compiling it, or copying it to a different folder. In my <code class="highlighter-rouge">gulpfile.js</code> I created a task to compile my <code class="highlighter-rouge">.jsx</code> file and also copy it over to my <code class="highlighter-rouge">public/</code> and <code class="highlighter-rouge">build/</code> files.</p> <figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// gulpfile.js</span>

<span class="c1">//require our npm modules</span>
<span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">browserify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-browserify'</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">rename</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-rename'</span><span class="p">)</span>
  <span class="p">;</span>

<span class="c1">//create js compile task</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'build-js'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'src/js/app.jsx'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">browserify</span><span class="p">({</span>
      <span class="na">transform</span><span class="p">:</span> <span class="p">[</span><span class="s1">'babelify'</span><span class="p">],</span>
      <span class="na">extensions</span><span class="p">:</span> <span class="p">[</span><span class="s1">'.jsx'</span><span class="p">]</span>
    <span class="p">}))</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">rename</span><span class="p">(</span><span class="s1">'app.js'</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'build'</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'public/js'</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">//create html compile task</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'build-html'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'src/index.html'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'public'</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">//create helper tasks</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'build'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'build-js'</span><span class="p">,</span> <span class="s1">'build-html'</span><span class="p">]);</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'build'</span><span class="p">]);</span></code></pre></figure> <p>Now, if we run <code class="highlighter-rouge">$ gulp</code>, it will kick off our default task and build our js and html files and put them in the appropriate place.</p> <p>Another thing we’ll do here is to create a watch task so that any changes in our js or html file will force the build task to run again. Add the folowing to the <code class="highlighter-rouge">gulpfile.js</code> and update our default task.</p> <figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'watch'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/js/**/*.jsx'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'build-js'</span><span class="p">]);</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/js/*.jsx'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'build-js'</span><span class="p">]);</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/index.html'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'build-html'</span><span class="p">]);</span>
<span class="p">});</span>

<span class="p">...</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'build'</span><span class="p">,</span> <span class="s1">'watch'</span><span class="p">]);</span></code></pre></figure> <p>Now when you run <code class="highlighter-rouge">$ gulp</code>, that task will continue running and watch for any changes in the files specified. To test this out, open the <code class="highlighter-rouge">public/index.html</code> file. You should see <code class="highlighter-rouge">Hello World</code> on our page that’s rendered from our React Component. Now, if you go to your source code and change the contents of <code class="highlighter-rouge">hello.jsx</code> to read <code class="highlighter-rouge">Hello World!!!</code> and save, the code will be automatically be rebuilt. Refresh the <code class="highlighter-rouge">index.html</code> page to confirm that the change in the jsx file is reflected in the post-build html page.</p> <h2 id="wrapping-up">Wrapping up</h2> <p>Whew, that was a pretty long process. Hopefully that gave you a step by step of the configuration needed to get set up to use React with Browserify + Gulp. Now I’m going to go play around and get more comfortable with React. Check out the final version of this code in this <a href="https://github.com/snags88/react-basic-config">repo</a>.</p> </div> </article> <footer class="site-footer"> <div class="container"> <ul class="social"> <li><a href="http://github.com/snags88" target="_blank"><i class="icon icon-github"></i></a></li> <li><a href="http://linkedin.com/in/snaganuma" target="_blank"><i class="icon icon-linkedin"></i></a></li> <li><a href="http://twitter.com/S2k10" target="_blank"><i class="icon icon-twitter"></i></a></li> </ul> <p> <small>&copy;2018 All rights reserved. Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/nandomoreirame/dotX" target="_blank">dotX</a> theme.</small> </p> </div> </footer> </main> <script src="/assets/js/jquery-2.1.1.js"></script> <script src="/assets/js/main.js"></script> </body> </html>