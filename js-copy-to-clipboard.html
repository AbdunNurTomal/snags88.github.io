<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>JS: Copy to Clipboard Button</title> <meta name="description" content="A while ago (as in a month) I was doing a code challenge to create a bitly clone. One of the features I wanted to include on my website was the ability to pr..."> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="http://snags88.github.io/js-copy-to-clipboard"> <link rel="alternate" type="application/rss+xml" title="gem install Seiji" href="http://snags88.github.io/feed.xml"> <script src="/assets/js/modernizr.js"></script> </head> <body"> <main class="wrapper"> <header class="site-header"> <a href="#navbar" id="menu-burger" class="menu-burger">Menu <span class="nav-icon"></span> <svg x="0px" y="0px" width="54px" height="54px" viewBox="0 0 54 54"> <circle fill="transparent" stroke="#000000" stroke-width="1" cx="27" cy="27" r="25" stroke-dasharray="157 157" stroke-dashoffset="157"></circle> </svg> </a> <div id="navbar" class="navbar"> <div class="navigation-wrapper"> <div class="half-block"> <h2>Navigation</h2> <nav> <ul class="no-style primary-nav"> <li><a href="/">Home</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/about">About</a></li> <li><a href="http://github.com/snags88" target="_blank"><i class="icon icon-github"></i> Github</a></li> <li><a href="http://linkedin.com/in/snaganuma" target="_blank"><i class="icon icon-linkedin"></i> LinkedIn</a></li> <li><a href="http://twitter.com/S2k10" target="_blank"><i class="icon icon-twitter"></i> Twitter</a></li> </ul> </nav> </div> </div> </div> </header> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header intro"> <div class="intro-in"> <h1 class="post-title" itemprop="name headline">JS: Copy to Clipboard Button</h1> <p class="post-meta"><time datetime="2015-06-24T09:28:00-07:00" itemprop="datePublished">Jun 24, 2015</time></p> </div> </header> <div class="post-content container" itemprop="articleBody"> <p>A while ago (as in a month) I was doing a code challenge to create a <a href="href=&quot;https://bitly.com/&quot;" target="_blank">bitly</a> clone. One of the features I wanted to include on my website was the ability to press a button and have the shortened URL copied to your computer’s clipboard. I thought “Easy, no problem. Just have to use JavaScript magic.” WRONG! The user’s clipboard is not accessible from the web browser due to security concerns.</p> <p>Well not entirely wrong. One of the workaround for this issue was found by Jeffery Larson and it involves using JavaScript. What you can do is embed an Adobe Flash object into the DOM, send it the text to be copied, and voilà! Although this hack has been patched in the latest versions of Adobe Flash, there is a JavaScript library called <a href="href=&quot;https://github.com/zeroclipboard/zeroclipboard&quot;" target="_blank">ZeroClipboard</a> that gets around the patch. From what I’ve read, it was actually created by staff members at Github so users can copy URLs and SHA codes easily.</p> <p>Anyways, enough talking. Let’s actually go through how to implement ZeroClipboard in a Rails app.</p> <p style="text-align: center;">♦ ♦ ♦</p> <p>First things first, we have to require the ZeroClipboard library. Thankfully there is a gem called <strong>zeroclipboard-rails</strong> that we can add to our project’s <strong>Gemfile</strong>. Afterwards, we just need to require <strong>zeroclipboard.js</strong> in our assets file:</p> <figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'zeroclipboard-rails'</span></code></pre></figure> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// app/assets/javascripts/application.js</span>
<span class="c1">//= require zeroclipboard</span></code></pre></figure> <p>Next, we’ll go ahead and set up the HTML so that we have a “Copy” button with a specific ID and some text for us to copy.</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">"text-to-copy"</span><span class="nt">&gt;</span>This text will be copied.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"copy-to-clipboard"</span><span class="nt">&gt;</span>Copy!<span class="nt">&lt;/button&gt;</span></code></pre></figure> <p>Now we get to jump into JavaScript. For this example I’m using the jQuery library for simplicity sake. However, this can be accomplished with vanilla JavaScript. The first thing we need to do is instantiate a ZeroClipboard object while passing in the DOM element that represents the “Copy” button. Then after the document loads, we’ll create an event listener to listen for a <strong>copy</strong> event and pass it a function to trigger when the event occurs.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ZeroClipboard</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">"#copy-to-clipboard"</span><span class="p">));</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"copy"</span><span class="p">,</span> <span class="nx">copyToClipboard</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure> <p>We haven’t defined the <strong>copyToClipboard</strong> function yet, but we’ll do that next. This particular one is hard coded to get the text in the &lt;p&gt; tag, but you can configure this function to be more dynamic.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">copyToClipboard</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">clipboard</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clipboardData</span><span class="p">;</span> <span class="c1">//access system clipboard</span>
  <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"#text-to-copy"</span><span class="p">).</span><span class="nx">text</span><span class="p">();</span> <span class="c1">//set text to copy variable</span>
  <span class="nx">clipboard</span><span class="p">.</span><span class="nx">setData</span><span class="p">(</span><span class="s2">"text/plain"</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="c1">//write new data into system clipboard</span>
<span class="p">}</span></code></pre></figure> <p>Now, if you put all that together, you get a fully functioning “Copy” button that copies stuff onto your system clipboard. How cool is that? If you want to see this in action, go check out my <a href="https://shorty-app.herokuapp.com/" target="_blank">Shorty App</a> and the <a href="https://github.com/snags88/url-shortener" target="_blank">public repo</a>.  Until next time, happy coding!</p> </div> </article> <footer class="site-footer"> <div class="container"> <ul class="social"> <li><a href="http://github.com/snags88" target="_blank"><i class="icon icon-github"></i></a></li> <li><a href="http://linkedin.com/in/snaganuma" target="_blank"><i class="icon icon-linkedin"></i></a></li> <li><a href="http://twitter.com/S2k10" target="_blank"><i class="icon icon-twitter"></i></a></li> </ul> <p> <small>&copy;2018 All rights reserved. Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/nandomoreirame/dotX" target="_blank">dotX</a> theme.</small> </p> </div> </footer> </main> <script src="/assets/js/jquery-2.1.1.js"></script> <script src="/assets/js/main.js"></script> </body> </html>