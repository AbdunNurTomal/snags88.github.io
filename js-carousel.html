<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>JS: Carousel</title> <meta name="description" content="Flatiron School ended last Friday and now most of my classmates and I are in a flurry of interviews. So far I’ve found that there’s been a lot of JavaScript ..."> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="http://snags88.github.io/js-carousel"> <link rel="alternate" type="application/rss+xml" title="gem install Seiji" href="http://snags88.github.io/feed.xml"> <script src="/assets/js/modernizr.js"></script> </head> <body"> <main class="wrapper"> <header class="site-header"> <a href="#navbar" id="menu-burger" class="menu-burger">Menu <span class="nav-icon"></span> <svg x="0px" y="0px" width="54px" height="54px" viewBox="0 0 54 54"> <circle fill="transparent" stroke="#000000" stroke-width="1" cx="27" cy="27" r="25" stroke-dasharray="157 157" stroke-dashoffset="157"></circle> </svg> </a> <div id="navbar" class="navbar"> <div class="navigation-wrapper"> <div class="half-block"> <h2>Navigation</h2> <nav> <ul class="no-style primary-nav"> <li><a href="/">Home</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/about">About</a></li> <li><a href="http://github.com/snags88" target="_blank"><i class="icon icon-github"></i> Github</a></li> <li><a href="http://linkedin.com/in/snaganuma" target="_blank"><i class="icon icon-linkedin"></i> LinkedIn</a></li> <li><a href="http://twitter.com/S2k10" target="_blank"><i class="icon icon-twitter"></i> Twitter</a></li> </ul> </nav> </div> </div> </div> </header> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header intro"> <div class="intro-in"> <h1 class="post-title" itemprop="name headline">JS: Carousel</h1> <p class="post-meta"><time datetime="2015-04-28T12:37:00-07:00" itemprop="datePublished">Apr 28, 2015</time></p> </div> </header> <div class="post-content container" itemprop="articleBody"> <p>Flatiron School ended last Friday and now most of my classmates and I are in a flurry of interviews. So far I’ve found that there’s been a lot of JavaScript related questions so I figured I would practice a little bit on JSFiddle. I stumbled through pseudo-coding a carousel in a recent interview and got curious on how I would implement it. I am a developer after all, so I made one.</p> <p><strong>tl;dr</strong> The main concept is that you have items that are hidden and you slide them in/out of view based on what button is clicked. Here’s the <a href="https://jsfiddle.net/xosu6wLy/3/" target="_blank">JSFiddle</a>.</p> <h3 id="html">HTML</h3> <p>The HTML structure is pretty straight forward. There’s an outer container that will holds 2 div containers; the first contains the panels that rotate through the view and the second contains the buttons that the user can click through to get to a certain set of panels.</p> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"outer-container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"panel-container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"panels"</span> <span class="na">class=</span><span class="s">"clearfix"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"panel"</span> <span class="na">data-index=</span><span class="s">"0"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"panel"</span> <span class="na">data-index=</span><span class="s">"1"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"panel"</span> <span class="na">data-index=</span><span class="s">"2"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"panel"</span> <span class="na">data-index=</span><span class="s">"3"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"panel"</span> <span class="na">data-index=</span><span class="s">"4"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"panel"</span> <span class="na">data-index=</span><span class="s">"5"</span><span class="nt">&gt;</span>6<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"button-container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"buttons"</span> <span class="na">class=</span><span class="s">"clearfix"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"button"</span> <span class="na">data-panel=</span><span class="s">"0"</span><span class="nt">&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"button"</span> <span class="na">data-panel=</span><span class="s">"1"</span><span class="nt">&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"button"</span> <span class="na">data-panel=</span><span class="s">"2"</span><span class="nt">&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"button"</span> <span class="na">data-panel=</span><span class="s">"3"</span><span class="nt">&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure> <p>Inside the panel and button containers, I created an unordered list with the panels/buttons as list items. The classes and the data attributes are used for styling and JQuery so make sure to include those.</p> <h3 id="css">CSS</h3> <p>Half the battle is setting up the html elements to sit where you want. There are some key parts so I’ll highlight them here.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* General Styling */</span>
<span class="nc">.outer-container</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
    <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">190px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">ul</span> <span class="p">{</span>
    <span class="nl">list-style-type</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
    <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">ul</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.clearfix</span><span class="nd">:after</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span><span class="s1">" "</span><span class="p">;</span>
    <span class="nl">visibility</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">both</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>The <code class="highlighter-rouge">outer container</code> should have it’s overflow set to hidden so that the panels that extend beyond what you want to show are hidden. It also should have a set width. I hard-coded mine to fit exactly 3 panels. The <code class="highlighter-rouge">ul</code> has some general styling like removing the bullet points. The <code class="highlighter-rouge">li</code> elements are set to float left and display block so that they line up horizontally. Lastly, we have the famous <code class="highlighter-rouge">clearfix</code> because we used float on the list item elements.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Panel styling */</span>
 <span class="nc">.panel-container</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">370px</span><span class="p">;</span> <span class="c">/* should fit all panels horizontally*/</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
    <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.panel</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">50px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">50px</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">10px</span> <span class="m">0</span> <span class="m">10px</span> <span class="m">10px</span><span class="p">;</span>
    <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>For the panels, we need to style the <code class="highlighter-rouge">panel-container</code> to a set width so that all of the panels fit horizontally. Otherwise, the panels will move down to the next row. I also set the position to relative so that the JQuery will animate the container left and right relative to the parent container. The <code class="highlighter-rouge">panels</code> themselves can be formatted however they need to be. For the sake of the example, I set fixed heights on them.</p> <figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Button styling */</span>
 <span class="nc">.button-container</span> <span class="p">{</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">96px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.button</span> <span class="p">{</span>
    <span class="nl">background</span><span class="p">:</span> <span class="no">green</span><span class="p">;</span>
    <span class="nl">height</span><span class="p">:</span><span class="m">20px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span><span class="m">20px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="nl">margin</span><span class="p">:</span> <span class="m">5px</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">cursor</span><span class="p">:</span> <span class="nb">pointer</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <p>The buttons don’t really matter in terms of the styling, but to center the <code class="highlighter-rouge">button-container</code>, I gave it a fixed width and the good ol’ margin auto trick. Additionally for the <code class="highlighter-rouge">button</code> I used cursor pointer so that they look like real clickable buttons.</p> <h3 id="javascriptjquery">JavaScript/JQuery</h3> <p>Here’s where the real fun is. There are plenty of other ways to implement this, but to make things easier, I created HTML data attributes on both the panels and buttons to figure out which buttons relate to which panels. First of all, on document load, we need to bind an event listener to the buttons using the following code.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">".button"</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="nx">carousel</span><span class="p">);</span>
<span class="p">})</span></code></pre></figure> <p>The callback function called <code class="highlighter-rouge">carousel</code> will be triggered when a user clicks a button.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">carousel</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s2">"panel"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">*</span> <span class="nx">$</span><span class="p">(</span><span class="s2">"li[data-index="</span> <span class="o">+</span> <span class="nx">index</span> <span class="o">+</span> <span class="s2">"]"</span><span class="p">).</span><span class="nx">outerWidth</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="nx">scrollView</span><span class="p">(</span><span class="nx">width</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>The purpose of the <code class="highlighter-rouge">carousel</code> function is to determine which button was clicked and how many pixels it should move the <code class="highlighter-rouge">panel-container</code> to the left. After it determines that, it will call a function called <code class="highlighter-rouge">scrollView</code> providing the amount of pixels to scroll.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">scrollView</span><span class="p">(</span><span class="nx">pixels</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">$panelContainer</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">".panel-container"</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">shift</span> <span class="o">=</span> <span class="nx">pixels</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="nx">$panelContainer</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
      <span class="s2">"left"</span><span class="p">:</span> <span class="nx">shift</span> <span class="o">+</span> <span class="s2">"px"</span>
  <span class="p">},</span> <span class="s2">"slow"</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>Finally the <code class="highlighter-rouge">scrollView</code> function will take the given input and animate the scroll!</p> <h3 id="conclusion">Conclusion</h3> <p>There’s a lot of libraries out there to do some front-end animation, but it’s really important to know how to build it from scratch. It could be intimidating at first, but once you break down the concepts, it’s pretty straight forward. Until next time, happy coding!</p> </div> </article> <footer class="site-footer"> <div class="container"> <ul class="social"> <li><a href="http://github.com/snags88" target="_blank"><i class="icon icon-github"></i></a></li> <li><a href="http://linkedin.com/in/snaganuma" target="_blank"><i class="icon icon-linkedin"></i></a></li> <li><a href="http://twitter.com/S2k10" target="_blank"><i class="icon icon-twitter"></i></a></li> </ul> <p> <small>&copy;2018 All rights reserved. Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/nandomoreirame/dotX" target="_blank">dotX</a> theme.</small> </p> </div> </footer> </main> <script src="/assets/js/jquery-2.1.1.js"></script> <script src="/assets/js/main.js"></script> </body> </html>